
<!DOCTYPE html>
<html>
  <body>
  	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  	<script src="//code.jquery.com/jquery-1.10.2.js"></script>
  	<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  	<div id="datepicker"></div>

  	<script>
  		// The list of suggestions that, in center_renders, is obtained through item['suggested_times'], string.
  		suggestions = "[{\"start\":\"2015-06-01T08:00:00.000+00:00\",\"end\":\"2015-06-01T09:00:00.000+00:00\"},{\"start\":\"2015-06-01T08:30:00.000+00:00\",\"end\":\"2015-06-01T09:30:00.000+00:00\"},{\"start\":\"2015-06-01T15:30:00.000+00:00\",\"end\":\"2015-06-01T16:30:00.000+00:00\"},{\"start\":\"2015-06-01T16:00:00.000+00:00\",\"end\":\"2015-06-01T17:00:00.000+00:00\"},{\"start\":\"2015-06-01T16:30:00.000+00:00\",\"end\":\"2015-06-01T17:30:00.000+00:00\"},{\"start\":\"2015-06-02T08:00:00.000+00:00\",\"end\":\"2015-06-02T09:00:00.000+00:00\"},{\"start\":\"2015-06-02T08:30:00.000+00:00\",\"end\":\"2015-06-02T09:30:00.000+00:00\"},{\"start\":\"2015-06-02T11:00:00.000+00:00\",\"end\":\"2015-06-02T12:00:00.000+00:00\"},{\"start\":\"2015-06-02T11:30:00.000+00:00\",\"end\":\"2015-06-02T12:30:00.000+00:00\"},{\"start\":\"2015-06-02T12:00:00.000+00:00\",\"end\":\"2015-06-02T13:00:00.000+00:00\"},{\"start\":\"2015-06-02T14:00:00.000+00:00\",\"end\":\"2015-06-02T15:00:00.000+00:00\"},{\"start\":\"2015-06-02T14:30:00.000+00:00\",\"end\":\"2015-06-02T15:30:00.000+00:00\"},{\"start\":\"2015-06-02T15:00:00.000+00:00\",\"end\":\"2015-06-02T16:00:00.000+00:00\"},{\"start\":\"2015-06-03T08:00:00.000+00:00\",\"end\":\"2015-06-03T09:00:00.000+00:00\"},{\"start\":\"2015-06-03T08:30:00.000+00:00\",\"end\":\"2015-06-03T09:30:00.000+00:00\"},{\"start\":\"2015-06-03T12:00:00.000+00:00\",\"end\":\"2015-06-03T13:00:00.000+00:00\"},{\"start\":\"2015-06-03T12:30:00.000+00:00\",\"end\":\"2015-06-03T13:30:00.000+00:00\"},{\"start\":\"2015-06-03T15:30:00.000+00:00\",\"end\":\"2015-06-03T16:30:00.000+00:00\"},{\"start\":\"2015-06-03T16:00:00.000+00:00\",\"end\":\"2015-06-03T17:00:00.000+00:00\"},{\"start\":\"2015-06-03T16:30:00.000+00:00\",\"end\":\"2015-06-03T17:30:00.000+00:00\"},{\"start\":\"2015-06-04T08:00:00.000+00:00\",\"end\":\"2015-06-04T09:00:00.000+00:00\"},{\"start\":\"2015-06-04T16:00:00.000+00:00\",\"end\":\"2015-06-04T17:00:00.000+00:00\"},{\"start\":\"2015-06-04T16:30:00.000+00:00\",\"end\":\"2015-06-04T17:30:00.000+00:00\"},{\"start\":\"2015-06-05T08:00:00.000+00:00\",\"end\":\"2015-06-05T09:00:00.000+00:00\"},{\"start\":\"2015-06-05T08:30:00.000+00:00\",\"end\":\"2015-06-05T09:30:00.000+00:00\"},{\"start\":\"2015-06-05T09:00:00.000+00:00\",\"end\":\"2015-06-05T10:00:00.000+00:00\"},{\"start\":\"2015-06-05T09:30:00.000+00:00\",\"end\":\"2015-06-05T10:30:00.000+00:00\"},{\"start\":\"2015-06-05T10:00:00.000+00:00\",\"end\":\"2015-06-05T11:00:00.000+00:00\"},{\"start\":\"2015-06-05T10:30:00.000+00:00\",\"end\":\"2015-06-05T11:30:00.000+00:00\"},{\"start\":\"2015-06-05T11:00:00.000+00:00\",\"end\":\"2015-06-05T12:00:00.000+00:00\"},{\"start\":\"2015-06-05T11:30:00.000+00:00\",\"end\":\"2015-06-05T12:30:00.000+00:00\"},{\"start\":\"2015-06-05T12:00:00.000+00:00\",\"end\":\"2015-06-05T13:00:00.000+00:00\"},{\"start\":\"2015-06-05T12:30:00.000+00:00\",\"end\":\"2015-06-05T13:30:00.000+00:00\"},{\"start\":\"2015-06-05T13:00:00.000+00:00\",\"end\":\"2015-06-05T14:00:00.000+00:00\"},{\"start\":\"2015-06-05T13:30:00.000+00:00\",\"end\":\"2015-06-05T14:30:00.000+00:00\"},{\"start\":\"2015-06-05T14:00:00.000+00:00\",\"end\":\"2015-06-05T15:00:00.000+00:00\"},{\"start\":\"2015-06-05T14:30:00.000+00:00\",\"end\":\"2015-06-05T15:30:00.000+00:00\"},{\"start\":\"2015-06-05T15:00:00.000+00:00\",\"end\":\"2015-06-05T16:00:00.000+00:00\"},{\"start\":\"2015-06-05T15:30:00.000+00:00\",\"end\":\"2015-06-05T16:30:00.000+00:00\"},{\"start\":\"2015-06-05T16:00:00.000+00:00\",\"end\":\"2015-06-05T17:00:00.000+00:00\"},{\"start\":\"2015-06-05T16:30:00.000+00:00\",\"end\":\"2015-06-05T17:30:00.000+00:00\"}]"

  		suggestions_obj = JSON.parse(suggestions)
  		
  		var valid_dates = {}
        for(i in suggestions_obj) {
            var datetime = suggestions_obj[i];
            var datestr = datetime.start.split("T")[0].replace("-", "/");
            var date = new Date(datetime.start);
            valid_dates[date.valueOf()] = true
        }
        console.log(valid_dates);
        alert(valid_dates[0]);

        $("#datepicker").datepicker({
	        // convert suggested times into dates
	        // if the date is in that list return true else return false
	        beforeShowDay: function(date) {
	            if(date.valueOf() in valid_dates) {
	                console.log("TRUE");
	                return [true, ''];
	            }
	            else {
	                return [false, ''];
	            }
	        }
	    });

  	</script>
  </body>
</html>
